<!DOCTYPE html>
<html>
  <head>
    <base target="_top">     
  </head>
  <body>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <div class="container" style="margin:30px;">
      <label for="body">Chose a color</label>
      <input type="color" id="color" name="color"
                value="#f6b73c" onchange="updateColorFromInput();">     
    </div>
    
    <div class="container" style="margin:30px;">
      <input type="text" value="#f6b73c" id="hex">
      <button lass="btn btn-primary" onclick="copyHex()">Copy hex-code</button>
    </div>
    
    <div class="container" style="margin:30px;">
      <input type="text" value="https://max-makhrov.github.io/pages/color#f6b73c" id="url" style="width:400px;">>
      <button lass="btn btn-primary" onclick="copyUrl()">Copy URL</button>
    </div>
    
   <script type="text/javascript">
     console.log('version 2.3');
     updateColor(null);
     
     function updateColor(hexCode) {
       // [ 1 ]. get hex code from url
       let hex;
       if (hexCode) {
         hex = hexCode;
       } else {
         // get hex from url
         hex = window.location.hash.substr(1);
         console.log(hex);
         if (hex) {
           const input = document.getElementById("color");
           if (hex.substring(0, 1) !== '#') { hex = '#' + hex; }
           input.value = hex;
         } else 
         {
           hex = "#f6b73c";
         }
       }

       // [ 2 ]. set hex code of label
       let hexInput =  getHex();
       hexInput.value = hex;

       // [ 3 ]. set url text
       var urlInput = getUrl();
       urlInput.value = "https://max-makhrov.github.io/pages/color" + hex;

       // set background color
       document.body.style.background = hex;
     }
     
     function updateColorFromInput() {
       const input = document.getElementById("color");
        updateColor(input.value);
     }
     
     
     function getHex() {
       return copyText = document.getElementById("hex");
     }
     function getUrl() {
       return copyText = document.getElementById("url");
     }
     
     // copy hex code
    function copyHex() {
      let copyText =  getHex();
      copyText.select();
      copyText.setSelectionRange(0, 99999)
      document.execCommand("copy");
    } 
 
     // copy url code
    function copyUrl() {
      let copyText =  getUrl();
      copyText.select();
      copyText.setSelectionRange(0, 99999)
      document.execCommand("copy");
    } 
     
  </script>
  </body>
</html>
